	<PG name="mcq">		<SCR isFunc="1" name="sortOptionTxt"><![CDATA[// _______________ FUNCTION ___________________// SETS OPTION TEXT TO INCLUDE VALUES FOR ANY VARIABLES// variable names in option text should be marked up with { }ansTxt = textToCheck;tempTxt = '';tempNo = 0;// replaces variable names in answer with valuefor (j=0;j<variables.length;j++){  varNo = 0;  counter = 0;  while (varNo < ansTxt.length){    // searches ansTxt for each variable    varPos = ansTxt.indexOf(markUpStart+variables[j]+markUpEnd,varNo);        if (varPos == -1) // none or no more found    {      tempTxt += ansTxt.substring(tempNo,ansTxt.length);      varNo = ansTxt.length;      // will leave while loop now    } else { // variable found      varName = variables[j];      varValue = expression(varName, this);      tempTxt += ansTxt.substring(tempNo,varPos) + varValue;      varNo = varPos+variables[j].length;      tempNo = varNo+2;    }  }    ansTxt = tempTxt;  tempTxt = "";  tempNo = 0;}textToCheck = ansTxt;//debug("fnct "+textToCheck);]]></SCR>		<SCR name="getPageID"><![CDATA[// SET UP PAGE & GET INFO NEEDED FROM XML// recalculate variable valuesvaluesCalc = 0;getAlgebraInfo();pageIcon = icon.parentNode.clip();myXML = new XML(extXML.firstChild.childNodes[rootIcon.getPageIndex() - pgOffset]);pageIcon.templateData = myXML.toObject();rootIcon.setTitleText(XMLdata.name);myInfo = pageIcon.templateData.mcq[0];align = myInfo.align;panelWidth = myInfo.panelWidth;if (panelWidth == "Small"){  panelW = 300;  textW = 440;} else if (panelWidth == "Medium"){  panelW = 450;  textW = 290;} else if (panelWidth == "Large"){  panelW = 600;  textW = 140;} else {  panelW = 760;  textW = 0;}if (myInfo.narration != undefined){  narration = myInfo.narration;  rootIcon.broadcast('showAudio');}ln = myInfo.option.length; // no. of optionsoptionArray = new Array();for (i=0;i<ln;i++){  optionArray.push(myInfo.option[i].text);  textToCheck = optionArray[i];    sortOptionTxt(); // calls function to replace any vars in answer with values   optionArray.splice(i,1,textToCheck);}]]></SCR>		<DIS w="panelW" h="474" tabIndex="-1" id="panel" name="panel" x="align == 'Right' ? 20 : textW + 40" y="20" type="ext" url="templatePath + 'common/whitePanel.swf'"><![CDATA[]]></DIS>		<DIS embedVars="1" name="instruction" x="align == 'Right' ? panel._x + panelW + 20 : 20" y="panel._y" w="textW" h="10" type="text"><![CDATA[{myInfo.instruction}]]></DIS>		<DIS embedVars="1" textColour="#000000" id="prpt" name="question" x="panel._x + 20" y="panel._y + 20" w="panelW - 40" h="10" type="text"><![CDATA[{myInfo.prompt}]]></DIS>		<SCR name="makeOptions"><![CDATA[optionTracking = new Array();correctAnswers = new Array();if (icon.attributes.built != "true"){  icon.nextSibling.childNodes[1].duplicate(myInfo.option.length - 2);  icon.attributes.built = "true";}//multi answer?if (myInfo.type == 'Multiple Answer'){  for (i=0; i<myInfo.option.length; i++){    icon.nextSibling.childNodes[i].attributes.type="checkBox";  }}for (i=0; i<ln; i++){  optionTracking.push(0);  // gives them all unique names  icon.nextSibling.childNodes[i].attributes.rs = 'option'+i;  if (myInfo.option[i].correct == 'true'){    correctAnswers.push(1);    icon.nextSibling.childNodes[i].attributes.correct = 1;  } else {    correctAnswers.push(0);    icon.nextSibling.childNodes[i].attributes.correct = 0;  }}]]></SCR>		<INT id="ques" name="buttonInteraction" perpetual="0">			<RES w="panelW - 60" textColour="#000000" name="protoOption" type="radio" x="prpt._x" y="prpt._y + prpt._height + 30" label="{optionArray[icon.index()]}" group="grp" erase="1" exit="0">				<SCR name="trackAnswers"><![CDATA[//track the questionif (myInfo.type == 'Single Answer'){  for (i = 0; i < ln; i++){    optionTracking.splice(i,1,0);  }  optionTracking.splice(icon.parentNode.index(),1,1);} if (myInfo.type == 'Multiple Answer'){   if (icon.parentNode.clip().getValue() == true){    optionTracking.splice(icon.parentNode.index(),1,1);  } else {    optionTracking.splice(icon.parentNode.index(),1,0);  }} btnSubmit.setEnabled(true);fb = myInfo.option[icon.parentNode.index()].feedback;]]></SCR>			</RES>			<RES w="panelW - 60" textColour="#000000" name="protoOption" type="radio" x="prpt._x" y="_ytile + 10" label="{optionArray[icon.index()]}" group="grp" erase="1" exit="0">				<SCR name="trackAnswers"><![CDATA[//track the questionif (myInfo.type == 'Single Answer'){  for (i = 0; i < ln; i++){    optionTracking.splice(i,1,0);  }  optionTracking.splice(icon.parentNode.index(),1,1);} if (myInfo.type == 'Multiple Answer'){   if (icon.parentNode.clip().getValue() == true){    optionTracking.splice(icon.parentNode.index(),1,1);  } else {    optionTracking.splice(icon.parentNode.index(),1,0);  }} btnSubmit.setEnabled(true);fb = myInfo.option[icon.parentNode.index()].feedback;]]></SCR>			</RES>			<RES enabled="0" rs="btnSubmit" swf="templatePath + 'common/button.swf'" name="button" type="button" x="prpt._x" y="_ytile + 10" label="Check" erase="1" exit="0">				<SCR name="makeFeedback"><![CDATA[//single answer feedbackfb = "";for (i=0; i<ln; i++){  if (optionTracking[i] == 1){    fb += myInfo.option[i].feedback + '\r\r';  }}fb = '<b>Feedback</b><br>' + fb;// all correct are selectedscore = 0;for (i=0; i<ln; i++){  if (correctAnswers[i] == optionTracking[i]) {    score++;  }}if (score == ln) {  icon.parentNode.nextSibling.clip()._visible = true;  btnSubmit._visible = false;}]]></SCR>				<DIS embedVars="1" scrolling="auto" textColour="#000000" name="feedback" x="btnSubmit._x" y="btnSubmit._y + 40" w="panelW - 40" h="474 - (btnSubmit._y + btnSubmit._height) - 10" type="text"><![CDATA[{fb}]]></DIS>			</RES>			<RES visible="0" swf="templatePath + 'common/button.swf'" name="restart" type="button" x="btnSubmit._x" y="btnSubmit._y" label="Restart" erase="1" exit="0">				<SCR name="restart"><![CDATA[rootIcon.gotoPage(rootIcon.getPageIndex() - 1);]]></SCR>			</RES>		</INT>	</PG>